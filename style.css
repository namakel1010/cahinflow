/* * ==============================================
* テーマ変数と基本スタイル
* ==============================================
*/
:root {
    --ink: #0B0D10;
    --plum: #2F1E3F;
    --gold-start: #BF953F;
    --gold-mid1: #FCF6BA;
    --gold-mid2: #B38728;
    --gold-mid3: #FBF5B7;
    --gold-end: #AA771C;
    --ivory: #F3F1EC;
    --burgundy: #4B1F2C;
    --jade: #3C5A3A;
    --verm: #D53B2E;
    --olive: #2E3A24;
    --amethyst: #6D4BAE;
    --text-color: #CECECE;

    --bg-color: var(--ink);
    --text-primary: var(--ivory);
    --text-secondary: var(--text-color);
    --text-on-accent: var(--ink);
    --accent-color: var(--amethyst);
    --primary-gradient: linear-gradient(135deg, var(--gold-start), var(--gold-mid1), var(--gold-mid2), var(--gold-mid3), var(--gold-end));
    --font-family-base: 'Poppins', sans-serif;
    --font-family-jp: 'Noto Sans JP', sans-serif;
    --font-family-serif: 'Zen Old Mincho', serif;
    --font-family-display: 'Bebas Neue', sans-serif;
}

[data-theme="cute"] {
    --cute-pink: #C03E5D;
    --cute-salmon: #D56D7A;
    --cute-mauve: #B883A1;
    --cute-brown: #A6776A;
    
    --bg-color: linear-gradient(to bottom, #FEF9F9, #FFECEF);
    --text-primary: #5E3A3A;
    --text-secondary: #856363;
    --text-on-accent: #FEF9F9;
    
    --accent-color: var(--cute-salmon);
    --primary-gradient: linear-gradient(135deg, #C03E5D, #D56D7A, #B883A1, #D56D7A, #A6776A);
    
    --font-family-base: 'M PLUS Rounded 1c', sans-serif;
    --font-family-jp: 'M PLUS Rounded 1c', sans-serif;
    --font-family-serif: 'M PLUS Rounded 1c', sans-serif;
    --font-family-display: 'M PLUS Rounded 1c', sans-serif;
}

html { scroll-behavior: smooth; }

html, body {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
html::-webkit-scrollbar,
body::-webkit-scrollbar {
    display: none;
}

body {
    height: 100vh;
    background: var(--bg-color);
    color: var(--text-primary);
    font-family: var(--font-family-base);
    margin: 0;
    overflow-x: hidden;
    overflow-y: hidden;
    transition: background 0.5s ease, color 0.5s ease;
}

body.scrollable { overflow-y: auto; }
body.menu-open { overflow: hidden; }

* {
    transition: color 0.5s ease, background-color 0.5s ease, border-color 0.5s ease, fill 0.5s ease;
}

.primary-gradient-text {
    background: var(--primary-gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
}

.primary-gradient-border {
    border-image-source: var(--primary-gradient);
}

/* * ==============================================
* ヘッダー & テーマ切り替えスイッチ
* ==============================================
*/
.header {
    position: fixed; top: 0; left: 0; width: 100%; padding: 20px 5%; display: flex;
    justify-content: space-between; align-items: center; z-index: 999;
}
.header-logo { font-family: 'Marcellus', serif; font-size: 1.8rem; font-weight: bold; text-decoration: none; letter-spacing: 0.05em; }

.header-right-controls { display: flex; align-items: center; gap: 20px; }

.menu-container { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.menu-text { font-family: var(--font-family-display); font-size: 1.5rem; letter-spacing: 0.1em; }
.hamburger-menu { width: 30px; height: 20px; display: flex; flex-direction: column; justify-content: space-between; background: none; border: none; padding: 0; transition: transform 0.3s; }
.hamburger-menu:hover { transform: scale(1.1); }
.hamburger-menu .line { width: 100%; height: 2px; background: var(--primary-gradient); }

.theme-switch-wrapper { display: flex; align-items: center; }
.theme-switch { position: relative; display: inline-block; width: 60px; height: 34px; }
.theme-switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.3); transition: .4s; border-radius: 34px; border: 1px solid rgba(255,255,255,0.1); }
[data-theme="cute"] .slider { border-color: rgba(94, 58, 58, 0.2); }
.slider:before {
    position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px;
    background-color: white; transition: .4s; border-radius: 50%;
}
input:checked + .slider { background: var(--cute-pink); }
input:checked + .slider:before { transform: translateX(26px); }
.slider .icon { position: absolute; top: 50%; transform: translateY(-50%); font-size: 16px; user-select: none; opacity: 0; transition: opacity 0.4s ease; }
.slider .cool-icon { left: 8px; opacity: 1; }
.slider .cute-icon { right: 8px; }
input:checked + .slider .cool-icon { opacity: 0; }
input:checked + .slider .cute-icon { opacity: 1; }

.ripple {
    position: fixed;
    border-radius: 50%;
    background-color: var(--accent-color);
    transform: scale(0);
    animation: ripple-effect 0.8s ease-out;
    pointer-events: none;
    z-index: 10000;
    opacity: 0.7;
}
@keyframes ripple-effect {
    to {
        transform: scale(1);
        opacity: 0;
    }
}

/* * ==============================================
* ローディング & イントロ画面
* ==============================================
*/
#loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--bg-color); display: grid; place-items: center; z-index: 1001; transition: opacity 1s ease-out, visibility 1s ease-out; }
#loading-screen.hidden { opacity: 0; visibility: hidden; }
.loader-content { display: flex; flex-direction: column; align-items: center; gap: 40px; }
.combined-loader-container { position: relative; width: 160px; height: 160px; display: grid; place-items: center; }
.loading-text {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--text-secondary);
    font-family: var(--font-family-display); font-size: 1.5rem; letter-spacing: 0.2em; white-space: nowrap; z-index: 10;
}
.loading-text span { animation: blink-dots 1.4s infinite; opacity: 0; }
.loading-text span:nth-child(1) { animation-delay: 0.0s; }
.loading-text span:nth-child(2) { animation-delay: 0.2s; }
.loading-text span:nth-child(3) { animation-delay: 0.4s; }
@keyframes blink-dots { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }

.cssload-loader { position: relative; width: 100%; height: 100%; perspective: 780px; }
.cssload-inner { position: absolute; width: 100%; height: 100%; box-sizing: border-box; border-radius: 50%; }
.cssload-inner.cssload-one { left: 0%; top: 0%; animation: rotate-one 1.15s linear infinite; border-bottom: 3px solid var(--accent-color); }
.cssload-inner.cssload-two { right: 0%; top: 0%; animation: rotate-two 1.15s linear infinite; border-right: 3px solid var(--text-primary); }
.cssload-inner.cssload-three { right: 0%; bottom: 0%; animation: rotate-three 1.15s linear infinite; border-top: 3px solid var(--gold-mid1); }
[data-theme="cute"] .cssload-inner.cssload-three { border-top-color: var(--cute-mauve); }

@keyframes rotate-one { 0% { transform: rotateX(35deg) rotateY(-45deg) rotateZ(0deg); } 100% { transform: rotateX(35deg) rotateY(-45deg) rotateZ(360deg); } }
@keyframes rotate-two { 0% { transform: rotateX(50deg) rotateY(10deg) rotateZ(0deg); } 100% { transform: rotateX(50deg) rotateY(10deg) rotateZ(360deg); } }
@keyframes rotate-three { 0% { transform: rotateX(35deg) rotateY(55deg) rotateZ(0deg); } 100% { transform: rotateX(35deg) rotateY(55deg) rotateZ(360deg); } }

.progress-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }
.progress-bar-container { width: 250px; height: 8px; background-color: rgba(109, 75, 174, 0.2); border-radius: 4px; overflow: hidden; }
[data-theme="cute"] .progress-bar-container { background-color: rgba(213, 109, 122, 0.2); }
.progress-bar { width: 0%; height: 100%; background: var(--primary-gradient); transition: width 0.1s linear; }
.loading-percentage { font-family: var(--font-family-display); font-size: 1.2rem; color: var(--text-primary); letter-spacing: 0.1em; }

#interstitial-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
    background-image: linear-gradient(rgba(11, 13, 16, 0.8), rgba(11, 13, 16, 0.8)), url('https://placehold.co/1920x1080/4B1F2C/0B0D10?text=Intro+Background');
    background-size: cover; background-position: center; z-index: 1000; display: flex;
    padding: 5%; box-sizing: border-box; opacity: 0; visibility: hidden;
    transition: opacity 1s ease, visibility 1s ease;
}
[data-theme="cute"] #interstitial-screen {
    background-image: linear-gradient(rgba(42, 33, 46, 0.8), rgba(42, 33, 46, 0.8)), url('https://placehold.co/1920x1080/D56D7A/2a212e?text=Intro+Background');
}
#interstitial-screen.visible { opacity: 1; visibility: visible; }

.interstitial-content { text-align: center; max-width: 600px; width: 100%; margin: auto; }
.interstitial-text-en {
    font-family: 'Cormorant Garamond', serif; font-size: clamp(2rem, 5vw, 2.8rem);
    font-weight: 400; letter-spacing: 0.05em; margin-bottom: 1rem; color: var(--text-secondary);
    min-height: 1.5em; white-space: nowrap;
}
.interstitial-text-jp {
    font-family: var(--font-family-serif); font-size: clamp(0.9rem, 2vw, 1.1rem);
    font-weight: 400; line-height: 1.8; color: var(--text-secondary); min-height: 2em; 
}
.interstitial-content p span { 
    opacity: 0; 
    transition: opacity 0.5s ease, color 1s cubic-bezier(0.25, 1, 0.5, 1), text-shadow 1s cubic-bezier(0.25, 1, 0.5, 1);
}
.interstitial-content p span.revealed { opacity: 1; }

.interstitial-content p span.gold-reveal {
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 10px var(--gold-mid1);
}
[data-theme="cute"] .interstitial-content p span.gold-reveal {
    text-shadow: 0 0 10px var(--cute-salmon);
}

#skip-button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    background: transparent; border: 1px solid var(--text-secondary);
    color: var(--text-secondary); font-family: var(--font-family-display);
    font-size: 1.4rem; letter-spacing: 0.2em; padding: 12px 35px; border-radius: 50px;
    cursor: pointer; transition: background 0.3s, color 0.3s, box-shadow 0.3s, transform 0.3s;
    margin-top: 3rem;
    margin-left: auto;
    margin-right: auto;
    opacity: 0; animation: fade-in 1s ease 4s forwards;
}
#skip-button svg {
    width: 1rem;
    height: 1rem;
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}
#skip-button:hover { 
    background: var(--text-primary); 
    color: var(--text-on-accent); 
    transform: scale(1.05);
    box-shadow: 0 0 20px var(--gold-mid1);
}
[data-theme="cute"] #skip-button:hover {
    box-shadow: 0 0 20px var(--cute-salmon);
}
#skip-button:hover svg {
    transform: translateX(5px) scale(1.1);
}
@keyframes fade-in { to { opacity: 1; } }

/* * ==============================================
* 背景エフェクト
* ==============================================
*/
#particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 1; }
#music-notes-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 2; pointer-events: none; overflow: hidden; }
.music-element { position: absolute; color: rgba(243, 241, 236, 0.1); font-size: 2rem; user-select: none; transition: transform 0.1s linear, opacity 0.5s ease; }
[data-theme="cute"] .music-element { color: rgba(192, 62, 93, 0.2); }

#zoom-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 5; perspective: 800px; }
.zoom-layer { position: absolute; top: 50%; left: 50%; background-color: transparent; border-style: solid; will-change: transform, opacity; overflow: hidden; }
.zoom-layer img, .zoom-layer video { width: 100%; height: 100%; object-fit: cover; }
.primary-gradient-border { border-image-slice: 1; border-image-source: var(--primary-gradient); }

/* * ==============================================
* メインコンテンツエリア
* ==============================================
*/
#text-display-area { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 20; pointer-events: none; }
#text-content {
    max-width: 90%; width: 600px; 
    position: absolute; top: 50%; left: 50%;
    text-align: left;
    opacity: 0; 
    transform: translate(-50%, -50%) scale(0.5); 
    transform-origin: center center;
    font-family: var(--font-family-serif);
    transition: none;
}

.music-player {
    font-family: var(--font-family-base);
    background: linear-gradient(135deg, rgba(109, 75, 174, 0.5), rgba(47, 30, 63, 0.7));
    backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px;
    width: 100%; max-width: 340px; padding: 24px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); color: var(--text-secondary);
}
[data-theme="cute"] .music-player {
    background: linear-gradient(135deg, rgba(192, 62, 93, 0.5), rgba(213, 109, 122, 0.7));
    border-color: rgba(94, 58, 58, 0.2);
}
.music-player .track-info { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
.music-player .album-art { width: 80px; height: 80px; border-radius: 12px; object-fit: cover; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
.music-player .title { font-size: 1.2rem; font-weight: 700; color: var(--text-primary); margin: 0; }
.music-player .artist { font-size: 0.9rem; font-weight: 400; color: var(--text-secondary); }
.music-player .follow-btn { background: transparent; border: 1px solid var(--text-secondary); color: var(--text-secondary); border-radius: 50px; padding: 4px 12px; font-size: 0.7rem; cursor: pointer; transition: all 0.3s; margin-top: 8px; }
.music-player .follow-btn:hover { background: var(--text-primary); color: var(--text-on-accent); }
.music-player .controls { display: flex; align-items: center; justify-content: space-between; margin-top: 16px; }
.music-player .play-btn { width: 48px; height: 48px; background: var(--text-primary); border-radius: 50%; display: grid; place-items: center; cursor: pointer; transition: transform 0.2s; }
.music-player .play-btn:hover { transform: scale(1.1); }
.music-player .play-btn svg { color: var(--text-on-accent); width: 24px; height: 24px; }
.music-player .control-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 8px; }
.music-player .control-btn:hover { color: var(--text-primary); }
.music-player .preview-tag { border: 1px solid var(--text-secondary); border-radius: 4px; padding: 2px 8px; font-size: 0.7rem; color: var(--text-secondary); }
.music-player .tracklist { list-style: none; padding: 0; margin: 24px 0; max-height: 150px; overflow-y: auto; }
.music-player .track-item { 
    display: flex; align-items: center; justify-content: space-between; padding: 10px 4px; 
    border-bottom: 1px solid rgba(255, 255, 255, 0.05); font-size: 0.8rem;
    position: relative; overflow: hidden; cursor: pointer;
}
.music-player .track-item::before {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--text-primary); opacity: 0; transition: opacity 0.3s ease; z-index: 0;
}
.music-player .track-item:hover::before { opacity: 0.1; }
.music-player .track-item > * { position: relative; z-index: 1; }

[data-theme="cute"] .music-player .track-item { border-bottom-color: rgba(94, 58, 58, 0.1); }
.music-player .track-item:last-child { border-bottom: none; }
.music-player .track-details { display: flex; align-items: center; gap: 12px; }
.music-player .track-number { color: var(--text-secondary); width: 20px; text-align: center; }
.music-player .track-title { color: var(--text-primary); font-weight: 500; }
.music-player .track-artist { font-size: 0.7rem; color: var(--text-secondary); }
.music-player .track-duration { color: var(--text-secondary); }
.music-player .track-play-icon {
    opacity: 0; transition: opacity 0.3s ease; color: var(--text-primary);
}
.music-player .track-item:hover .track-play-icon { opacity: 1; }
.music-player .track-item:hover .track-number { opacity: 0; }

.music-player .cta-banner { background: rgba(109, 75, 174, 0.2); border-radius: 16px; padding: 16px; text-align: center; margin-top: 16px; }
[data-theme="cute"] .music-player .cta-banner { background: rgba(192, 62, 93, 0.2); }
.music-player .cta-banner .icon { font-size: 1.5rem; color: var(--accent-color); }
.music-player .cta-banner p { margin: 8px 0 12px; font-size: 0.9rem; color: var(--text-primary); font-weight: 500; }
.music-player .cta-button { 
    background: var(--accent-color); color: #fff; border: none; border-radius: 50px; 
    padding: 8px 20px; font-size: 0.9rem; font-weight: 500; cursor: pointer; 
    transition: background 0.3s;
    animation: pulse 2s infinite;
}
@keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
    70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}
[data-theme="cool"] .music-player .cta-button:hover { background: #8662d4; animation-play-state: paused; }
[data-theme="cute"] .music-player .cta-button:hover { background: #e08a94; animation-play-state: paused; }

.title-wrapper { width: 100%; text-align: center; }
.section-title {
    font-family: var(--font-family-display); font-size: 2.5rem; letter-spacing: 0.2em;
    color: var(--text-primary); margin-bottom: 1rem; position: relative; display: inline-block;
}
.section-title::after {
    content: ''; position: absolute; bottom: -10px; left: 50%;
    transform: translateX(-50%); width: 60%; height: 3px;
    background: linear-gradient(90deg, var(--accent-color), var(--gold-mid1));
}
[data-theme="cute"] .section-title::after {
    background: linear-gradient(90deg, var(--accent-color), var(--cute-mauve));
}
.links-grid { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: nowrap; }
.link-button {
    background: transparent; border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px; width: 135px; height: 135px; display: flex;
    flex-direction: column; align-items: center; justify-content: center;
    gap: 12px; text-decoration: none; color: var(--text-primary);
    text-shadow: 0 0 8px rgba(243, 241, 236, 0.5); font-family: var(--font-family-base);
    font-size: 1rem; font-weight: 500;
    transition: transform 0.3s, background-color 0.3s, box-shadow 0.3s; flex-shrink: 0;
}
[data-theme="cute"] .link-button { text-shadow: none; border-color: rgba(94, 58, 58, 0.2); }
.link-button:hover {
    transform: translateY(-5px); background-color: rgba(243, 241, 236, 0.1);
    box-shadow: 0 0 20px rgba(251, 245, 183, 0.3);
}
[data-theme="cute"] .link-button:hover {
    background-color: rgba(94, 58, 58, 0.05);
    box-shadow: 0 0 20px rgba(213, 109, 122, 0.4);
}
.link-button svg { width: 42px; height: 42px; fill: currentColor; }

@media (max-width: 640px) { .links-grid { gap: 1rem; } .link-button { width: 120px; height: 120px; } }
@media (max-width: 480px) { .links-grid { gap: 0.5rem; } .link-button { width: 80px; height: 80px; font-size: 0.6rem; gap: 4px; } .link-button svg { width: 24px; height: 24px; } }

/* * ==============================================
* UI要素 (インジケーター、ボタン)
* ==============================================
*/
#page-indicator {
    position: fixed; bottom: 30px; left: 5%; z-index: 998;
    font-family: var(--font-family-display); display: flex; align-items: flex-end;
    opacity: 0; transition: opacity 1s ease;
}
body.scrollable #page-indicator { opacity: 1; }
.current-page { font-size: 4rem; letter-spacing: 0.05em; font-weight: 700; line-height: 1; }
.total-pages {
    font-size: 1.5rem; letter-spacing: 0.05em; padding-left: 10px; padding-bottom: 0.3rem;
    background: linear-gradient(135deg, var(--gold-mid2), var(--gold-mid3));
    background-clip: text; -webkit-background-clip: text; color: transparent; opacity: 0.6;
}
[data-theme="cute"] .total-pages {
    background: linear-gradient(135deg, var(--cute-salmon), var(--cute-mauve));
    background-clip: text; -webkit-background-clip: text; color: transparent;
}

#scroll-button {
    position: fixed; bottom: 40px; right: 5%;
    /* [MODIFIED] z-indexを上げて最前面に表示 */
    z-index: 1003;
    background: rgba(11, 13, 16, 0.3); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1); width: 50px; height: 50px; border-radius: 50%;
    display: grid; place-items: center; cursor: pointer;
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    opacity: 0; visibility: hidden;
}
[data-theme="cute"] #scroll-button { background: rgba(255, 245, 247, 0.3); border-color: rgba(94, 58, 58, 0.2); }
#scroll-button::after {
    content: ''; position: absolute; width: 100%; height: 100%;
    border-radius: 50%; background: transparent; z-index: -1; animation: wave 2.5s infinite;
}
[data-theme="cute"] #scroll-button::after {
    animation: wave-cute 2.5s infinite;
}
#scroll-button.visible { opacity: 1; visibility: visible; }
#scroll-button:hover { transform: scale(1.15); }
#scroll-button:hover #scroll-button-icon { animation: bounce 0.8s infinite; }
#scroll-button-icon { transition: transform 0.3s ease; }
@keyframes wave {
    0% { box-shadow: 0 0 0 0px rgba(191, 149, 63, 0.5); }
    100% { box-shadow: 0 0 0 20px rgba(191, 149, 63, 0); }
}
@keyframes wave-cute {
    0% { box-shadow: 0 0 0 0px rgba(213, 109, 122, 0.5); }
    100% { box-shadow: 0 0 0 20px rgba(213, 109, 122, 0); }
}
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }

#bottom-fade {
    position: fixed; bottom: 0; left: 0; right: 0; height: 50vh;
    background: linear-gradient(to top, var(--bg-color) 20%, transparent);
    z-index: 19; pointer-events: none; opacity: 0; transition: opacity 0.8s ease-in-out, background 0.5s ease;
}
#bottom-fade.visible { opacity: 1; }

/* * ==============================================
* メニューオーバーレイ
* ==============================================
*/
#menu-overlay {
    opacity: 0; visibility: hidden; transition: opacity 0.4s ease, visibility 0.4s ease;
    background-color: rgba(11, 13, 16, 0.9);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}
[data-theme="cute"] #menu-overlay {
    background-color: rgba(254, 249, 249, 0.6); 
}
#menu-overlay.visible { opacity: 1; visibility: visible; }
#menu-overlay nav { position: relative; }
.menu-link {
    display: inline-block; font-family: var(--font-family-display);
    font-size: clamp(2.5rem, 8vw, 4rem); letter-spacing: 0.1em;
    text-decoration: none; color: var(--text-secondary);
    transition: color 0.3s ease, transform 0.3s ease; padding: 0.5rem 1rem;
}
.menu-link:hover {
    background: var(--primary-gradient); background-clip: text;
    -webkit-background-clip: text; color: transparent; transform: scale(1.1);
}
#close-menu-btn {
    font-family: sans-serif; color: var(--text-secondary);
    transition: color 0.3s ease, transform 0.3s ease;
}
#close-menu-btn:hover { color: var(--text-primary); transform: scale(1.2); }

/* * ==============================================
* エンディング & ノイズエフェクト
* ==============================================
*/
#ending-curtain {
    position: fixed; inset: 0; z-index: 1002;
    background-color: rgba(11, 13, 16, 0.95);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    opacity: 0; visibility: hidden;
    transition: opacity 1s ease, visibility 1s ease;
}
#ending-curtain.visible { opacity: 1; visibility: visible; }
.ending-logo {
    font-family: 'Marcellus', serif; font-size: 3rem;
    letter-spacing: 0.1em; margin-bottom: 2rem;
    opacity: 0; transform: translateY(20px);
    animation: fade-up 1.5s ease 0.5s forwards;
}
.ending-message {
    font-family: var(--font-family-display); font-size: 1.5rem;
    letter-spacing: 0.2em; color: var(--text-secondary);
    opacity: 0; transform: translateY(20px);
    animation: fade-up 1.5s ease 1s forwards;
}

#ending-curtain.visible .ending-logo,
#ending-curtain.visible .ending-message {
    filter: url(#beat-noise-filter);
}

@keyframes fade-up {
    to { opacity: 1; transform: translateY(0); }
}